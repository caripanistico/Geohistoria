(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{118:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(18),r=n.n(c),i=(n(93),n(12)),l=n.n(i),o=n(23),h=n(8),u=n(9),d=n(11),m=n(10),j=n(19),p=n(6),b=n(44),O=n(43),g=n(0),x=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"style",value:function(e,t){return{left:e,top:t}}},{key:"render",value:function(){var e=this.props.hecho;return Object(g.jsx)("div",{children:Object(g.jsx)(j.b,{to:"/hecho",children:Object(g.jsx)("span",{className:"tooltiptext",children:Object(g.jsx)("button",{id:e._id,type:"button",className:"botonm",style:this.style(0,0),onClick:this.props.mostrarHecho.bind(this,e),children:Object(g.jsx)("span",{className:"tooltiptext",children:e.title})})})})})}}]),n}(a.Component),f=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),null!=e&&(a=t.call(this,e)),Object(O.a)(a)}return Object(u.a)(n,[{key:"render",value:function(){return Object(g.jsx)(x,{hecho:this.props.hecho,mostrarHecho:this.props.mostrarHecho},this.props.hecho._id)}}]),n}(a.Component),v=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{style:{height:"100vh"},children:Object(g.jsx)(b.a,{center:{lat:Number(this.props.lat),lng:Number(this.props.lng)},zoom:this.props.zoom,children:this.props.hechos.map((function(t){return Object(g.jsx)(f,{id:t._id,lat:t.x,lng:t.y,hecho:t,mostrarHecho:e.props.mostrarHecho})}))})})}}]),n}(a.Component);v.defaultProps={center:{lat:-36.8260421,lng:-73.0330456},zoom:12};var y=v,N="http://localhost:5000/imagen",k=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={selectedImg:e.images[0],images:e.images},a}return Object(u.a)(n,[{key:"setSelectedImg",value:function(e){this.setState({selectedImg:e})}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"Imagenes",children:Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("img",{src:N+"?filename="+this.state.selectedImg,alt:"Selected",className:"selected"}),Object(g.jsx)("div",{className:"imgContainer",children:this.state.images.map((function(t,n){return Object(g.jsx)("img",{style:{border:e.state.selectedImg===t?"4px solid black":""},src:N+"?filename="+t,alt:"imagen",onClick:function(){return e.setSelectedImg(t)}},n)}))})]})})}}]),n}(a.Component),C=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.hecho;return console.log(e),Object(g.jsxs)(a.Fragment,{children:[Object(g.jsxs)("head",{children:[Object(g.jsx)("meta",{charSet:"UTF-8"}),Object(g.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),Object(g.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),Object(g.jsx)("title",{children:"Archivo"}),Object(g.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Montserrat&family=Open+Sans&display=swap",rel:"stylesheet"}),Object(g.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/glider-js@1.7.7/glider.min.css"}),Object(g.jsx)("link",{rel:"stylesheet",href:"styles/home.css"})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("section",{class:"seccion",children:Object(g.jsx)("h1",{children:e.nimage1})}),Object(g.jsx)(k,{images:e.imagenes}),Object(g.jsxs)("aside",{class:"columna",children:[Object(g.jsx)("h1",{id:"title",children:e.title}),Object(g.jsx)("div",{children:Object(g.jsx)("p",{children:e.texto})})]}),Object(g.jsx)("footer",{class:"pie"}),Object(g.jsx)("script",{src:"https://kit.fontawesome.com/2c36e9b7b1.js",crossOrigin:"anonymous"}),Object(g.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/glider-js@1.7.7/glider.min.js"}),Object(g.jsx)("script",{src:"app.js"})]})]})}}]),n}(a.Component),L=n(88),S=(n(103),n(104),n(84)),E=function(e){var t=e.onChange,n=e.date1,s=e.date2,c=Object(a.useState)([{startDate:new Date(n,0,1),endDate:new Date(s,11,31),key:"selection"}]),r=Object(L.a)(c,2),i=r[0],l=r[1];return Object(g.jsx)(S.DateRangePicker,{onChange:function(e){var n=e.selection;t(n),l([n])},showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:2,ranges:i,direction:"horizontal",minDate:new Date(1800,0,1),maxDate:new Date(2040,11,31)})},w=[{title:"Concepci\xf3n",url:"#",cName:"nav-links",commune:"concepcion",lat:"-36.8260421",lng:"-73.0330456"},{title:"Talcahuano",url:"#",cName:"nav-links",commune:"talcahuano",lat:"-36.7305321",lng:"-73.1070265"},{title:"Penco",url:"#",cName:"nav-links",commune:"penco",lat:"-36.7379755",lng:"-72.9940383"},{title:"Tom\xe9",url:"#",cName:"nav-links",commune:"tome",lat:"-36.6181695",lng:"-72.9552698"},{title:"Florida",url:"#",cName:"nav-links",commune:"florida",lat:"-36.816667",lng:"-72.666667"},{title:"Hualp\xe9n",url:"#",cName:"nav-links",commune:"hualpen",lat:"-36.783333",lng:"-73.083333"},{title:"Hualqui",url:"#",cName:"nav-links",commune:"hualqui",lat:"-36.9759",lng:"-72.9384"},{title:"Santa Juana",url:"#",cName:"nav-links",commune:"santajuana",lat:"-37.166667",lng:"-72.933333"},{title:"Lota",url:"#",cName:"nav-links",commune:"lota",lat:"-37.0944",lng:"-73.1563"},{title:"Coronel",url:"#",cName:"nav-links",commune:"coronel",lat:"-37.016667",lng:"-73.133333"},{title:"San Pedro de la Paz",url:"#",cName:"nav-links",commune:"sanpedrodelapaz",lat:"-36.84082",lng:"-73.10311"},{title:"Chiguayante",url:"#",cName:"nav-links",commune:"chiguayante",lat:"-36.916667",lng:"-73.016667"}],D=(n(118),n(70),function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={clicked:!1},e.handleClick=function(){e.setState({clicked:!e.state.clicked})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsxs)("nav",{className:"NavbarItems",children:[Object(g.jsxs)("h1",{className:"navbar-logo",children:["Geohistoria",Object(g.jsx)("i",{className:"fab fa-react"})]}),Object(g.jsx)("div",{className:"menu-icon",onClick:this.handleClick,children:Object(g.jsx)("i",{className:this.state.clicked?"fas fa-times":"fas fa-bars"})}),Object(g.jsx)("ul",{className:this.state.clicked?"nav-menu active":"nav-menu",children:w.map((function(t,n){return Object(g.jsx)("li",{children:Object(g.jsx)("a",{className:t.cName,onClick:function(){e.props.setLat(t.lat),e.props.setLng(t.lng),e.props.setCommune(t.commune)},children:t.title})},n)}))}),Object(g.jsx)(j.b,{to:"/ingreso",children:Object(g.jsx)("button",{type:"button",className:"botoni",children:"Ingresar hecho"})})]})}}]),n}(a.Component)),I=n(85),H=n(86),A=n(29),F=n(58),M=n.n(F),_=n(87),z=n.n(_),B=n(73).default,P="http://localhost:5000/",T={titleError:"",descriptionError:"",yearError:"",communeError:"",imagenError:"",hayfotos:!1},R=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).validate=function(){var e="",t="",n="",s="",c="";return a.state.title||(e="Este campo es obligatorio."),a.state.description||(t="Este campo es obligatorio."),a.state.year?Number(a.state.year)||(n="Ingrese un n\xfamero v\xe1lido."):n="Este campo es obligatorio.",(a.state.year>2021||a.state.year<0)&&(n="A\xf1o inv\xe1lido."),a.state.commune||(s="Este campo es obligatorio."),a.hayfotos||(c="Este campo es obligatorio."),e||t||n||s||c?(a.setState({titleError:e}),a.setState({descriptionError:t}),a.setState({yearError:n}),a.setState({communeError:s}),a.setState({imagenError:c}),!1):(a.state.title&&a.state.description&&a.state.year&&a.state.commune&&a.hayfotos&&z()("Hecho publicado correctamente"),!0)},a.setLat=function(e){a.setState({lat:e})},a.setLng=function(e){a.setState({lng:e})},a.state={lat:-36.8260421,lng:-73.0330456,titleError:"",descriptionError:"",yearError:"",communeError:"",imagenError:""},a.handleChange=a.handleChange.bind(Object(A.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(A.a)(a)),a.handleEdit=a.handleEdit.bind(Object(A.a)(a)),a}return Object(u.a)(n,[{key:"handleLoaded",value:function(e,t){var n=this;e.addListener("click",(function(a){return n.handleClick(a,e,t)}),!1)}},{key:"handleSubmit",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var n,a,s,c,r,i,o,h,u,d,m,j,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.validate()&&this.setState(T),console.log(this.state),n=new M.a,a=document.querySelector("#imagenes"),s=Object(H.a)(a.files);try{for(s.s();!(c=s.n()).done;)r=c.value,i=r.name.split(".").pop(),o=r.slice(0,r.size,"image/png"),h=Date.now()+Math.random().toString(20).substr(2,6)+"."+i,u=new File([o],h,{type:"image/png"}),this.hayfotos=!0,"",this.setState({imagenError:""}),console.log(h,u),n.append(h,u)}catch(l){s.e(l)}finally{s.f()}return e.next=10,B.post(P+"add-image",n,{headers:{"Content-Type":"multipart/form-data"}});case 10:for(p in d=e.sent,m=d.data.imagenes,j=new M.a,this.state)j.append(p,this.state[p]);return j.append("imagenes",m),e.next=17,B.post(P+"add-point",j);case 17:d=e.sent,console.log(d);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(e,t,n){var a=this,s=e.latLng.lat(),c=e.latLng.lng();if(this.setLat(s),this.setLng(c),this.pin)this.pin.setPosition(e.latLng);else{var r=new n.Marker({position:e.latLng,map:t,title:"Click to remove"});r.addListener("click",(function(){r.setMap(null),a.pin=void 0}),!1),this.pin=r}}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name,s=Number(n);""!==n&&("lat"===a?isNaN(s)||s===this.state.lat||this.setLat(s):"lng"===a?isNaN(s)||s===this.state.lng||this.setLng(s):this.setState(Object(I.a)({},a,n)),"lat"!==t.name&&"lng"!==t.name||(t.value=""))}},{key:"handleEdit",value:function(e){"lat"===e.target.name?e.target.value=this.state.lat:e.target.value=this.state.lng}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"fondoo",children:Object(g.jsx)(a.Fragment,{children:Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("header",{className:"header",children:Object(g.jsx)("h1",{style:{color:"white"},children:"FORMULARIO DE COLABORACI\xd3N"})}),Object(g.jsxs)("section",{className:"seccion2",children:[Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{className:"label",for:"imagenes",children:"Imagenes: "}),Object(g.jsx)("input",{style:{border:"none"},className:"input",type:"file",name:"imagenes",id:"imagenes",multiple:!0}),Object(g.jsxs)("div",{style:{marginLeft:"20px"},className:"error",children:[" ",this.state.imagenError]})]}),Object(g.jsx)("div",{style:{height:"40vh",width:"98%",marginLeft:"10px"},children:Object(g.jsx)(b.a,{yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var n=t.map,a=t.maps;return e.handleLoaded(n,a)},center:{lat:Number(this.state.lat),lng:Number(this.state.lng)},zoom:11})}),Object(g.jsxs)("div",{className:"LatLong",children:[Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{className:"label",for:"lat",children:"Latitud:"}),Object(g.jsx)("input",{className:"input",type:"text",name:"lat",id:"formLat",autocomplete:"off",placeholder:this.state.lat,onClick:this.handleEdit,onBlur:this.handleChange})]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{className:"label",for:"lng",children:"Longitud:"}),Object(g.jsx)("input",{className:"input",type:"text",name:"lng",id:"formLng",autocomplete:"off",placeholder:this.state.lng,onClick:this.handleEdit,onBlur:this.handleChange})]})]}),Object(g.jsx)("p",{className:"aviso",children:"Procura seleccionar una ubicaci\xf3n en el mapa. de lo contrario el hecho estar\xe1 por defecto en el centro de Concepci\xf3n."})]}),Object(g.jsxs)("aside",{className:"columna2",children:[Object(g.jsx)("div",{className:"LatLong",style:{marginLeft:"-40px",textAlign:"center"},children:Object(g.jsx)(j.a,{exact:!0,path:"/ingreso",render:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(j.b,{to:"/",children:Object(g.jsx)("button",{type:"button",className:"botonv2",children:"Volver"})}),Object(g.jsx)("input",{className:"botonSubmit",value:"Submit",type:"submit"})]})}})}),Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{className:"label",for:"title",children:"T\xedtulo:"}),Object(g.jsx)("input",{className:"input",type:"text",name:"title",id:"title",onBlur:this.handleChange}),Object(g.jsxs)("div",{className:"error",children:[" ",this.state.titleError]})]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{className:"label",for:"description",children:"Descripci\xf3n:"}),Object(g.jsx)("textarea",{className:"textarea",type:"text",name:"description",id:"description",onBlur:this.handleChange}),Object(g.jsxs)("div",{className:"error",children:[" ",this.state.descriptionError]})]}),Object(g.jsxs)("div",{className:"LatLong",style:{width:"95%"},children:[Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{className:"label",for:"year",children:"A\xf1o:"}),Object(g.jsx)("input",{className:"input",type:"text",name:"year",id:"year",onBlur:this.handleChange}),Object(g.jsxs)("div",{className:"error",children:[" ",this.state.yearError]})]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{className:"label",for:"commune",children:"Comuna:"}),Object(g.jsx)("input",{className:"input",type:"text",name:"commune",id:"commune",onBlur:this.handleChange}),Object(g.jsxs)("div",{className:"error",children:[" ",this.state.communeError]})]})]})]})]})})})}}]),n}(a.Component),q=n(73).default,G=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).setLat=function(e){a.setState({lat:e})},a.setLng=function(e){a.setState({lng:e})},a.setCommune=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({commune:t}),e.prev=1,e.next=4,a.obtener_puntos(t,a.state.date1,a.state.date2);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.mostrarHecho=function(e){a.setState({hecho:e})},a.ocultarHecho=function(){a.setState({hecho:""})},a.obtener_puntos=function(){var e=Object(o.a)(l.a.mark((function e(t,n,s){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={commune:t,date1:n,date2:s},console.log(c),e.next=4,q.get("http://localhost:5000".concat("/date-range"),{params:c});case 4:r=e.sent,a.setState({hechos:r.data,date1:n,date2:s});case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.onChange_Dates=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({date1:t.startDate.getFullYear(),date2:t.endDate.getFullYear()}),e.prev=1,e.next=4,a.obtener_puntos(a.state.commune,t.startDate.getFullYear(),t.endDate.getFullYear());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert("back-end no responde !!");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={hechos:null,hecho:"",date1:1900,date2:2e3,lat:-36.8260421,lng:-73.0330456,commune:"concepcion"},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="GeoHistoria",e.prev=1,e.next=4,this.obtener_puntos(this.state.commune,this.state.date1,this.state.date2);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null==this.state.hechos?Object(g.jsx)("div",{children:Object(g.jsx)("h1",{children:" Cargando... "})}):Object(g.jsx)("div",{children:Object(g.jsxs)(j.a,{children:[Object(g.jsx)(p.a,{exact:!0,path:"/",render:function(){return Object(g.jsxs)("div",{id:"container",children:[Object(g.jsx)(D,{setLat:e.setLat,setLng:e.setLng,setCommune:e.setCommune}),Object(g.jsx)(E,{date1:e.state.date1,date2:e.state.date2,onChange:e.onChange_Dates}),Object(g.jsx)(y,{id:"google_map",hechos:e.state.hechos,mostrarHecho:e.mostrarHecho,lat:e.state.lat,lng:e.state.lng})]})}}),Object(g.jsx)(p.a,{exact:!0,path:"/hecho",render:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("nav",{class:"menu",children:Object(g.jsx)(j.b,{to:"/",children:Object(g.jsx)("button",{type:"button",className:"botonv",children:"Volver"})})}),Object(g.jsx)("section",{children:Object(g.jsx)(C,{hecho:e.state.hecho})})]})}}),Object(g.jsx)(p.a,{exact:!0,path:"/ingreso",render:function(){return Object(g.jsx)(R,{lat:e.state.lat,lng:e.state.lng})}})]})})}}]),n}(a.Component);r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(G,{})}),document.getElementById("root"))},70:function(e,t,n){},93:function(e,t,n){}},[[137,1,2]]]);
//# sourceMappingURL=main.48809c51.chunk.js.map